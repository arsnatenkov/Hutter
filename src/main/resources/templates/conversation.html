<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="/blocks/header.html :: header('Объявление') "></head>

<body class="scroll">
<!--<div th:utext="${offerDisplay}" class="offer-wrapper flex-h-chat"></div>-->
<div th:with="o=${offer}" class="offer-wrapper flex-h-chat">
    <h2 th:text="${o.address} + ', ' + ${o.totalArea} + ' м²'"></h2>
    <div id="save" class="btn f-group-btn save-btn">
        <a href="/save"><img class="invert" alt="save" src="/images/save.svg"></a>
    </div>
    <hr>
    <div class="center-div scroll">
        <div class="inner-div">
            <div class="text-container">
                <img class="offer-icons" src="/images/ruble.svg" alt="ruble">
                <span th:text="'&nbsp;цена: ' + ${o.cost} + ' ₽'"></span>
                <br/><br/>
                <img class="offer-icons" src="/images/plans.svg" alt="plans">
                <span th:text="'&nbsp;общая площадь: ' + ${o.totalArea} + ' м²'"></span>
                <br/>
                <span th:text="'&nbsp;жилая площадь: ' + ${o.living} + ' м²'"></span>
                <br/><br/>
                <img class="offer-icons" src="/images/floor.svg" alt="floor">
                <span th:text="'&nbsp;этаж: ' + ${o.floor} + ' из ' + ${o.floorMax}"></span>
                <br/><br/>
                <img class="offer-icons" src="/images/living-room.svg" alt="living-room">
                <span th:text="'&nbsp;кол-во комнат: ' + ${o.quantityRoom}"></span>
                <br/>
                <span th:text="'&nbsp;площади комнат: ' + ${o.roomsSpaces} + ' м²'"></span>
                <br/><br/>
                <img class="offer-icons" src="/images/bathroom.svg" alt="bathroom">
                <span th:text="'&nbsp;кол-во санузлов: ' + ${o.quantityToilet}"></span>
                <br/>
                <span th:text="'&nbsp;типы санузлов: ' + ${o.quantityToilet}"></span>
                <br/><br/>
                <img class="offer-icons" src="/images/brick.svg" alt="brick">
                <span th:text="'&nbsp;строительные материалы: ' + ${o.material}"></span>
                <br/><br/>
                <img class="offer-icons" src="/images/parking.svg" alt="parking">
                <span th:text="'&nbsp;парковка: ' + ${o.hasParking}"></span>
                <br/>
                <div th:if="${o.hasParking}">
                    <span th:text="'&nbsp;тип парковки: ' + ${o.parkingType}"></span>
                    <br/>
                </div>
                <br/>

                <img class="offer-icons" src="/images/document.svg" alt="document">
                <span th:text="'&nbsp;описание: ' + ${o.description}"></span>
                <br/><br/>
            </div>
        </div>
    </div>

    <br/><br/>
</div>

<div class="content-flex">
    <div class="txt1 heading-chat"><span th:text="#{conversation.with}">Conversation with</span>
        <a class="txt1 heading-chat" href="#">
            <span th:text="${companion.name}">Имя пользователя</span>
        </a>
    </div>
    <hr>
    <div class="force-scroll scroll">
        <div class="col-md-9 m-l-15 m-r-15">
            <div class="msg-display-wrapper" th:each="m : ${messages}">
                <div class="msg-display-header">
                    <div class="txt1">
                        <a th:fragment="messageUser(${m.sender})">
                            <span th:text="${m.sender.name}"></span>
                        </a>
                    </div>
                </div>
                <div class="msg-display-body">
                    <div class="msg-l time" th:text="${m.time}">01.05.2021</div>
                    <div class="msg-l" th:text="${m.message}"></div>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="msg-box-chat">
        <div class="up">
            <form th:object="${newMessage}" method="post"
                  th:action="@{'/conversation/{hostId}/{offerId}'(offerId=${offer.getId()},hostId=${companion.id})}">
                <table class="msg-hat">
                    <tr>
                        <td class="txt1 msg-head">
                            <!--                     th:text="#{conversation.new}">-->
                            Новое сообщение:
                        </td>
                        <td class="f-group-btn-wrap">
                            <button type="submit" name="submit" class="btn f-group-btn">
                                <img class="invert" alt="send" src="/images/send.svg">
                            </button>
                        </td>
                    </tr>
                </table>
                <div class="f-group wrap-input validate-input msg-validate">
                    <textarea placeholder="Введите текст" autocomplete="off" class="input scroll msg-input" rows="5"
                              id="comment"
                              th:field="*{message}"></textarea>
                    <div th:if="${#fields.hasErrors('message')}" style="margin-bottom: 25px"
                         class="txt1 validation-message">
                        <ul class="validation">
                            <li th:each="err : ${#fields.errors('message')}" th:text="${err}">&nbsp;</li>
                        </ul>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<br/>
<div th:insert="blocks/hat :: hat"></div>
<div th:insert="blocks/menu :: menu"></div>
</body>
</html>